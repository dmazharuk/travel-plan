import { useEffect, useState } from 'react';
import styles from './Alert.module.css';
import { useAppDispatch } from '@/shared/hooks/reduxHooks';
import { AlertType } from '../model';
import { removeAlert } from '../slice/alertsSlice';

type Props = {
  alert: AlertType;
};

export function Alert({ alert }: Props) {
  const [isExiting, setIsExiting] = useState(false);
  const dispatch = useAppDispatch();

  useEffect(() => {
    const timeout = setTimeout(() => {
      setIsExiting(true);
    }, 2700);

    const timeoutDispath = setTimeout(() => {
      dispatch(removeAlert(alert.id));
    }, 3000);

    return () => {
      clearTimeout(timeout);
      clearTimeout(timeoutDispath);
    };
  }, [dispatch, alert.id]);

  return (
    <div
      className={`${styles.alert} ${isExiting ? styles.exit : styles.enter}`}
    >
      {alert.status === 'success' ? (
        <svg
          className={styles.alertIcon}
          width="20"
          height="20"
          viewBox="0 0 512 512"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M0 256C0 114.615 114.615 0 256 0C397.385 0 512 114.615 512 256C512 397.385 397.385 512 256 512C114.615 512 0 397.385 0 256Z"
            fill="#00BA00"
          />
          <path
            d="M226.522 286.238L328.902 183.858C336.712 176.047 349.375 176.047 357.186 183.858C364.996 191.668 364.996 204.332 357.186 212.142L241.899 327.429C241.527 327.871 241.133 328.301 240.717 328.717C232.907 336.528 220.243 336.528 212.433 328.717L154.858 271.142C147.047 263.332 147.047 250.668 154.858 242.858C162.668 235.047 175.332 235.047 183.142 242.858L226.522 286.238Z"
            fill="white"
          />
        </svg>
      ) : alert.status === 'mistake' ? (
        <svg
          className={styles.alertIcon}
          width="20"
          height="20"
          viewBox="0 0 512 512"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M0 256C0 114.615 114.615 0 256 0C397.385 0 512 114.615 512 256C512 397.385 397.385 512 256 512C114.615 512 0 397.385 0 256Z"
            fill="#F44336"
          />
          <path
            d="M162.859 348.899C170.669 356.709 183.333 356.709 191.143 348.899L255.878 284.164L320.615 348.901C328.425 356.711 341.088 356.711 348.899 348.901C356.709 341.09 356.709 328.427 348.899 320.617L284.162 255.88L348.9 191.142C356.71 183.332 356.71 170.668 348.9 162.858C341.089 155.047 328.426 155.047 320.616 162.858L255.878 227.596L191.142 162.86C183.332 155.049 170.668 155.049 162.858 162.86C155.047 170.67 155.047 183.334 162.858 191.144L227.594 255.88L162.859 320.615C155.048 328.425 155.048 341.088 162.859 348.899Z"
            fill="white"
          />
        </svg>
      ) : (
        <svg
          className={styles.alertIcon}
          width="20"
          height="20"
          viewBox="0 0 512 512"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M67.3525 0.369023C68.3702 0.364441 69.388 0.359858 70.4366 0.355137C72.1024 0.355421 72.1024 0.355421 73.8018 0.355711C74.9876 0.351932 76.1734 0.348152 77.3951 0.344258C80.6826 0.334896 83.9701 0.330141 87.2576 0.32741C90.8052 0.323389 94.3528 0.313543 97.9004 0.304576C106.467 0.28428 115.034 0.273912 123.601 0.264764C127.641 0.260254 131.68 0.254738 135.719 0.249356C149.156 0.231868 162.593 0.216971 176.029 0.209523C179.515 0.20756 183 0.205586 186.485 0.203576C187.352 0.203078 188.218 0.202581 189.11 0.202069C203.127 0.193545 217.143 0.167515 231.159 0.134104C245.566 0.100045 259.972 0.0815872 274.379 0.0783081C282.461 0.0760881 290.543 0.0671772 298.625 0.0408269C305.512 0.0184255 312.398 0.0102794 319.285 0.0202332C322.793 0.0248805 326.301 0.0208218 329.809 0.00300284C356.619 -0.125486 376.429 3.81228 396.448 22.8655C412.599 39.4413 417.421 60.086 417.182 82.5404C417.176 84.1576 417.172 85.7749 417.169 87.3922C417.157 91.6019 417.127 95.8113 417.092 100.021C417.061 104.335 417.047 108.65 417.031 112.964C416.998 121.395 416.946 129.825 416.881 138.256C418.125 138.247 418.125 138.247 419.394 138.238C423.185 138.213 426.976 138.198 430.767 138.184C432.725 138.169 432.725 138.169 434.722 138.154C456.946 138.089 474.952 145.28 491.157 160.679C507.138 177.241 511.947 197.055 511.877 219.399C511.882 221.108 511.89 222.817 511.898 224.526C511.916 229.128 511.915 233.731 511.909 238.334C511.906 242.193 511.912 246.053 511.919 249.912C511.933 259.027 511.931 268.141 511.92 277.255C511.908 286.619 511.922 295.983 511.95 305.348C511.973 313.424 511.98 321.5 511.973 329.576C511.97 334.383 511.972 339.191 511.99 343.998C512.006 348.523 512.002 353.047 511.983 357.571C511.979 359.219 511.982 360.867 511.993 362.515C512.116 382.767 506.771 401.435 492.956 416.838C492.259 417.618 491.562 418.399 490.844 419.203C481.476 429.12 470.47 434.482 458.003 439.453C457.014 439.849 456.025 440.246 455.007 440.654C454.299 440.936 453.591 441.218 452.862 441.509C453.198 442.256 453.533 443.004 453.878 443.774C460.918 459.969 465.546 479.726 461.292 497.345C458.461 503.715 453.855 507.271 447.722 510.384C440.754 512.706 431.945 512.536 425.105 509.805C418.764 506.446 414.553 501.188 412.266 494.37C411.343 490.001 411.265 485.563 411.013 481.114C410.176 471.038 406.867 461.308 399.592 454.034C384.291 441.701 363.045 442.374 344.452 442.408C342.457 442.405 340.463 442.402 338.468 442.398C336.356 442.396 334.244 442.395 332.131 442.395C327.695 442.394 323.258 442.381 318.822 442.365C318.068 442.362 317.314 442.359 316.537 442.357C314.996 442.351 313.456 442.346 311.916 442.34C301.613 442.305 291.31 442.277 281.008 442.28C274.022 442.281 267.036 442.265 260.05 442.227C256.37 442.209 252.69 442.199 249.01 442.211C219.704 442.303 219.704 442.303 206.13 436.369C204.615 435.722 204.615 435.722 203.069 435.061C196.876 432.286 191.798 428.337 186.597 424.033C185.071 422.92 185.071 422.92 183.513 421.785C170.759 410.869 163.599 393.961 160.896 377.775C160.507 371.936 160.534 366.128 160.595 360.279C160.601 358.639 160.605 356.998 160.608 355.358C160.62 351.087 160.65 346.817 160.684 342.547C160.716 338.17 160.73 333.794 160.746 329.417C160.778 320.865 160.831 312.313 160.896 303.76C158.161 303.901 155.426 304.048 152.692 304.198C151.549 304.256 151.549 304.256 150.383 304.315C136.038 305.116 121.745 307.435 110.586 317.252C102.575 326.334 101.466 337.302 100.318 348.891C99.3855 357.863 97.1707 363.188 90.1374 368.989C84.0469 373.326 77.8117 374.557 70.4277 373.663C63.2987 372.312 57.573 369.029 52.9509 363.383C49.576 357.308 49.3455 351.94 49.4169 345.072C49.424 344.033 49.431 342.993 49.4383 341.923C49.7386 327.639 52.9574 314.582 59.1192 301.704C58.0643 301.59 57.0094 301.476 55.9226 301.359C39.2109 298.507 23.3598 286.165 13.5838 272.776C3.29948 256.801 0.208394 241.468 0.221636 222.879C0.215475 221.148 0.208477 219.418 0.20071 217.688C0.182618 213.009 0.177733 208.33 0.176419 203.65C0.174953 200.72 0.170555 197.79 0.165116 194.86C0.146117 184.619 0.137691 174.378 0.139311 164.137C0.140545 154.622 0.118873 145.107 0.0863842 135.592C0.0594109 127.397 0.0484683 119.203 0.0497791 111.008C0.0503008 106.125 0.0445828 101.243 0.022688 96.3597C0.0026326 91.7619 0.00272133 87.1645 0.0175819 82.5666C0.0197139 80.8901 0.0149806 79.2136 0.00244414 77.5371C-0.156152 54.8374 7.40169 36.3891 23.2217 19.8579C34.6843 8.90646 51.2832 0.402727 67.3525 0.369023Z"
            fill="#74B4FE"
          />
          <path
            d="M416.881 138.256C421.509 138.222 426.138 138.202 430.767 138.184C432.725 138.169 432.725 138.169 434.722 138.154C456.946 138.089 474.952 145.28 491.157 160.679C507.138 177.241 511.947 197.055 511.877 219.399C511.882 221.108 511.89 222.817 511.898 224.526C511.916 229.128 511.915 233.731 511.909 238.334C511.906 242.193 511.912 246.053 511.919 249.912C511.933 259.027 511.931 268.141 511.92 277.255C511.908 286.619 511.922 295.983 511.95 305.348C511.973 313.424 511.98 321.5 511.973 329.576C511.97 334.383 511.972 339.191 511.99 343.998C512.006 348.523 512.002 353.047 511.983 357.571C511.979 359.219 511.982 360.867 511.993 362.515C512.116 382.767 506.771 401.435 492.956 416.838C492.259 417.618 491.562 418.399 490.844 419.203C481.476 429.12 470.47 434.482 458.003 439.453C457.014 439.849 456.025 440.246 455.007 440.654C454.299 440.936 453.591 441.218 452.862 441.509C453.198 442.256 453.533 443.004 453.878 443.774C460.918 459.969 465.546 479.726 461.292 497.345C458.461 503.715 453.855 507.271 447.722 510.384C440.754 512.706 431.945 512.536 425.105 509.805C418.764 506.446 414.553 501.188 412.266 494.37C411.343 490.001 411.265 485.563 411.013 481.114C410.176 471.038 406.867 461.308 399.592 454.034C384.291 441.701 363.045 442.374 344.452 442.408C342.457 442.405 340.463 442.402 338.468 442.398C336.356 442.396 334.244 442.395 332.131 442.395C327.695 442.394 323.258 442.381 318.822 442.365C318.068 442.362 317.314 442.359 316.537 442.357C314.996 442.351 313.456 442.346 311.916 442.34C301.613 442.305 291.31 442.277 281.008 442.28C274.022 442.281 267.036 442.265 260.05 442.227C256.37 442.209 252.69 442.199 249.01 442.211C219.704 442.303 219.704 442.303 206.13 436.369C204.615 435.722 204.615 435.722 203.069 435.061C196.876 432.286 191.798 428.337 186.597 424.033C185.58 423.291 184.562 422.549 183.513 421.785C170.759 410.869 163.599 393.961 160.896 377.775C160.507 371.936 160.534 366.128 160.595 360.279C160.601 358.639 160.605 356.998 160.608 355.358C160.62 351.087 160.65 346.817 160.684 342.547C160.716 338.17 160.73 333.794 160.746 329.417C160.778 320.865 160.831 312.313 160.896 303.76C162.316 303.755 162.316 303.755 163.765 303.75C186.839 303.666 209.914 303.572 232.988 303.465C244.147 303.413 255.305 303.365 266.464 303.326C276.194 303.293 285.925 303.252 295.655 303.202C300.803 303.176 305.951 303.154 311.099 303.14C315.954 303.127 320.808 303.104 325.663 303.074C327.436 303.065 329.209 303.059 330.982 303.057C354.868 303.023 375.821 298.551 393.798 281.707C401.318 273.9 406.763 265.512 410.712 255.445C411.016 254.728 411.319 254.011 411.632 253.273C415.126 244.684 416.157 235.924 416.18 226.716C416.191 225.752 416.201 224.788 416.212 223.794C416.243 220.646 416.261 217.498 416.278 214.35C416.297 212.152 416.318 209.955 416.339 207.757C416.391 202.001 416.432 196.245 416.47 190.489C416.512 184.604 416.564 178.719 416.616 172.834C416.715 161.308 416.802 149.782 416.881 138.256Z"
            fill="#4478F0"
          />
          <path
            d="M323.071 122.451C329.929 127.345 334.915 135.135 336.693 143.396C337.996 153.576 335.6 162.459 329.585 170.794C323.149 178.036 314.607 181.681 305.104 182.784C295.764 183.192 288.585 180.511 281.371 174.621C274.2 167.857 270.779 159.368 270.448 149.628C270.387 140.48 273.147 133.549 279.174 126.559C291.8 114.382 308.245 113.526 323.071 122.451Z"
            fill="#E2F4FF"
          />
          <path
            d="M227.462 122.451C234.32 127.345 239.306 135.135 241.084 143.396C242.387 153.576 239.991 162.459 233.976 170.794C227.541 178.036 218.999 181.681 209.496 182.784C200.156 183.192 192.977 180.511 185.762 174.621C178.591 167.857 175.171 159.368 174.839 149.628C174.778 140.48 177.538 133.549 183.565 126.559C196.191 114.382 212.636 113.526 227.462 122.451Z"
            fill="#E2F4FF"
          />
          <path
            d="M127.999 120.78C135.688 125.833 140.699 132.542 143.419 141.34C144.829 151.838 143.69 160.911 137.492 169.577C133.237 174.736 129.081 178.006 122.858 180.403C122.068 180.765 121.279 181.126 120.465 181.499C112.661 184.226 104.163 183.345 96.7715 179.889C86.3815 173.96 81.3084 167.111 78.0618 155.715C76.1297 146.712 78.225 138.947 82.7643 131.06C93.8593 116.342 111.57 111.979 127.999 120.78Z"
            fill="#E2F4FF"
          />
        </svg>
      )}
      {alert.message}
    </div>
  );
}
